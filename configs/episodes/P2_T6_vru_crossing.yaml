episode_id: "P2_T6_vru_crossing"
suite_id: "P2"
type_id: "T6"
town: { preferred: ["Town03"], fallback: ["Town10","Town05"] }
seed: 2006
ego: { target_speed_kmh: 38, control_mode: "tm" }
topology_query:
  start_selector: { type: "crossing_zone_approach", offset_back_m: 160 }
  decision_point_selector: { type: "distance_to_crossing_zone", trigger_distance_m: 40 }
  route_selector: { type: "forward", forward_m: 240 }
npc_plan:
  traffic_manager: { vehicle_count: 20, walker_count: 35 }
  scripted_actors:
    - id: "crossing_ped"
      kind: "walker"
      blueprint: "walker.pedestrian.0004"
      spawn_rule: { type: "occluded_ped_popout", occluder: "parked_vehicle", offset_m: 1.5 }
      behavior: { type: "cross_road_at_time", start_after_s: 7.0, speed_mps: 1.5 }
event_markers:
  - name: "vru_conflict"
    trigger: { type: "distance_to_walker_below", meters: 11 }
    expected_action: "brake_or_yield"
    tags: ["vru","popout"]
termination: { mode: "time_or_distance", max_time_s: 60, min_progress_m: 130 }
