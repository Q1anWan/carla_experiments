id: pedestrian_emerge
map: Town05
doc: docs/scenarios/pedestrian_emerge.md
weather: ClearNoon
seed: 11
duration: 60.0
fps: 20
fixed_delta_seconds: 0.05
sync_mode: true
no_rendering_mode: false
ego_vehicle: vehicle.tesla.model3
camera:
  width: 1280
  height: 720
  fov: 90
  fps: 20
  preset: driver
events:
  min_event_time_s: 30.0
  voice_lead_time_s: 3.0
  robot_precue_lead_s: 0.5
  enabled_types:
    - avoid_pedestrian
  single_event_types:
    - avoid_pedestrian
scenario:
  # Critical event at ~40s (frame 800 at 20fps)
  # JAYWALKING: Pedestrian visible at roadside, suddenly crosses when ego approaches
  # NO relocate - pedestrian stands at roadside from beginning, starts crossing at trigger
  ego_spawn_index: 50                # Fixed spawn on Town05 straight road
  trigger_frame: 760                 # Pedestrian starts crossing at ~38s
  trigger_distance: 30.0             # Alternative distance trigger (30m ahead)
  walker_start_ahead_m: 80.0         # Keep pedestrian spawn close for stability (relocate at trigger)
  walker_side_offset_m: 5.0          # Pedestrian starts 5m from road center (at roadside)
  relocate_ahead_m: 35.0             # Position pedestrian 35m ahead when trigger
  relocate_side_m: 5.0               # Start 5m from center (clearly visible at roadside)
  cross_offset: -10.0                # Pedestrian crosses to the left (total 10m)
  relocate_on_trigger: true          # Reposition to ensure visibility
  occluder_forward_m: 38.0           # Parked car slightly ahead of pedestrian
  occluder_side_offset_m: 3.5        # Parked car at roadside
  occluder_blueprint: vehicle.volkswagen.t2  # Tall vehicle to occlude pedestrian
  walker_speed: 2.5                  # Faster pedestrian speed (jaywalking)
  ego_speed_delta: 5.0               # Ego closer to speed limit
  ego_follow_distance_m: 20.0        # Large following distance
  ego_auto_lane_change: false        # Disable auto lane change (reduces oscillation)
  ego_ignore_lights_percentage: 100.0  # Ignore traffic lights for continuous driving
  # MORE traffic for realistic city roads
  background_vehicle_count: 15       # More vehicles for realism
  background_walker_count: 0         # Reduce background walkers for stability
  background_min_distance_m: 40.0    # Allow closer background
  prewarm_seconds: 1.0
  # Nearby vehicles for traffic density
  nearby_vehicle_offsets:
    - forward: 50.0                  # Vehicle ahead
      right: 0.0
    - forward: -15.0                 # Vehicle behind ego
      right: 0.0
    - forward: 30.0                  # Vehicle in adjacent lane
      right: 4.0
