id: red_light_conflict
map: Town03
doc: docs/scenarios/red_light_conflict.md
weather: ClearNoon
seed: 33
duration: 60.0
fps: 20
fixed_delta_seconds: 0.05
sync_mode: true
no_rendering_mode: false
ego_vehicle: vehicle.tesla.model3
camera:
  width: 1280
  height: 720
  fov: 90
  fps: 20
  preset: driver
events:
  min_event_time_s: 30.0
  voice_lead_time_s: 3.0
  robot_precue_lead_s: 0.5
scenario:
  # Critical event at ~40s
  # NEW DESIGN: Ego approaches on GREEN, then light turns RED creating conflict
  # Phase 1 (0-35s): Light is GREEN, ego approaches intersection
  # Phase 2 (35s+): Light turns RED, MULTIPLE cross vehicles released
  ego_spawn_index: 165               # Fixed spawn near signalized intersection (Town03)
  cross_spawn_index: 10              # Cross traffic spawn near same junction
  spawn_offset_m: 300.0              # Fallback distance for ~30s approach at moderate speed
  red_light_frame: 600               # Light turns RED at 30s (20fps)
  cross_release_frame: 640           # Cross vehicles released 2s after red light
  ego_speed_delta: -10.0             # Ego slightly faster than limit
  ego_follow_distance_m: 15.0        # Comfortable following distance
  ego_ignore_lights_percentage: 0.0  # Respect lights (will stop at red)
  ego_ignore_vehicles_percentage: 0.0
  # MULTIPLE cross traffic vehicles for realistic conflict
  cross_vehicle_count: 2             # Reduced cross vehicles for stability
  cross_vehicle_spacing_m: 6.0       # Spacing between cross vehicles
  # MORE traffic for realistic city scene
  background_vehicle_count: 12       # Reduce background vehicles for stability
  background_walker_count: 0         # Disable background walkers for stability
  background_min_distance_m: 40.0    # Allow closer vehicles
  prewarm_seconds: 1.0
  # Nearby vehicles for traffic density (waiting at ego's side of intersection)
  nearby_vehicle_offsets:
    - forward: 60.0                  # Vehicle ahead waiting at light
      right: 0.0
    - forward: 50.0                  # Vehicle in adjacent lane
      right: 4.0
    - forward: -15.0                 # Vehicle behind ego
      right: 0.0
